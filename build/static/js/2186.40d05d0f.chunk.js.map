{"version":3,"file":"static/js/2186.40d05d0f.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Graphic.js\";import s from\"../../../core/Collection.js\";import{isSome as t,isNone as r}from\"../../../core/maybe.js\";import{init as h,on as a}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import p from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const g=\"sublayers\",d=\"layerView\",u=Object.freeze({remove(){},pause(){},resume(){}});let f=class extends(c(l)){constructor(){super(...arguments),this._highlightIds=new Map}async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(i=>i.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){t(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():t(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,i){const s=Array.from(this.graphicsViews(),(async i=>{const s=await i.hitTest(e);if(t(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(i);for(const i of s)!i.popupTemplate&&e.popupTemplate&&(i.popupTemplate=e.popupTemplate)}return s}));return(await Promise.all(s)).flat()}highlight(e){let t;return\"number\"==typeof e?t=[e]:e instanceof i?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):s.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),t.length?(this._addHighlight(t),{remove:()=>{this._removeHighlight(t)}}):u}update(e){for(const i of this.graphicsViews())i.processUpdate(e)}attach(){const e=this.view,i=()=>this.requestUpdate(),s=this.layer.featureCollections;if(t(s)&&s.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of s){const s=new p(this.view.featuresTilingScheme);s.fadeTransitionEnabled=!0;const r=new n({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:i,container:s});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.handles.add([h(t,\"visible\",(e=>r.container.visible=e)),h(r,\"updating\",(()=>this.notifyChange(\"updating\")))],d)}this._updateHighlight()}else t(this.layer.sublayers)&&this.handles.add(a(this.layer,\"sublayers\",\"change\",(()=>this._createGraphicsViews()),(()=>this._createGraphicsViews()),(()=>this._destroyGraphicsViews())),g)}detach(){this._destroyGraphicsViews(),this.handles.remove(g)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(d);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),r(this.layer.sublayers))return;const e=[],i=this.view,s=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new p(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const a=new n({view:i,graphics:t.graphics,requestUpdateCallback:s,container:r});this.handles.add([t.on(\"graphic-update\",a.graphicUpdateHandler),h(t,\"visible\",(e=>a.container.visible=e)),h(a,\"updating\",(()=>this.notifyChange(\"updating\")))],d),this.container.addChild(a.container),e.push(a)}this._graphicsViews=e,this._updateHighlight()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this.graphicsViews())i.setHighlight(e)}};f=e([o(\"esri.views.2d.layers.MapNotesLayerView2D\")],f);const m=f;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["g","d","u","Object","freeze","remove","pause","resume","f","c","l","constructor","super","arguments","this","_highlightIds","Map","e","Array","from","graphicsViews","i","hitTest","filter","popupTemplate","flat","t","_graphicsViewsFeatureCollectionMap","keys","_graphicsViews","s","async","get","Promise","all","highlight","uid","isArray","length","map","toArray","_addHighlight","_removeHighlight","update","processUpdate","attach","view","requestUpdate","layer","featureCollections","p","featuresTilingScheme","fadeTransitionEnabled","r","n","graphics","source","renderer","requestUpdateCallback","container","set","addChild","handles","add","h","visible","notifyChange","_updateHighlight","sublayers","a","_createGraphicsViews","_destroyGraphicsViews","detach","moveStart","moveEnd","viewChange","isUpdating","updating","removeAllChildren","destroy","on","graphicUpdateHandler","push","has","delete","setHighlight","o","m","renderChildren","attributeView","bindTextures","context","children","some","hasData","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","bind","defines","draw","unbind"],"sourceRoot":""}