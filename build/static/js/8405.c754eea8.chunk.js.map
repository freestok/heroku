{"version":3,"file":"static/js/8405.c754eea8.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import{isSome as t,unwrap as r}from\"../../../core/maybe.js\";import{watch as h,initial as o}from\"../../../core/reactiveUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as n}from\"./LayerView2D.js\";import c from\"./graphics/GraphicContainer.js\";import p from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const g=[\"routeInfo\",\"directionLines\",\"directionPoints\",\"polygonBarriers\",\"polylineBarriers\",\"pointBarriers\",\"stops\"],d=Object.freeze({remove(){},pause(){},resume(){}});let m=class extends(n(l)){constructor(){super(...arguments),this._graphicsViews=new Map,this._highlightIds=new Map}attach(){for(const e of g)this.handles.add(h((()=>t(this.layer[e])?\"routeInfo\"===e?[r(this.layer[e])]:r(this.layer[e]).toArray():null),(s=>this._createGraphicsView(e,s)),o),e)}detach(){this._destroyGraphicsViews()}highlight(e){let t;return\"number\"==typeof e?t=[e]:e instanceof s?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):i.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),t.length?(this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):d}async hitTest(e,s){if(this.suspended||!this._graphicsViews.size)return Promise.resolve(null);const i=Array.from(this._graphicsViews.values()).reverse().map((s=>s.hitTest(e))).flat().filter((e=>!!e));for(const t of i)t.layer=this.layer,t.sourceLayer=this.layer;return i}moveStart(){}moveEnd(){}update(e){for(const s of this._graphicsViews.values())s.processUpdate(e)}viewChange(){for(const e of this._graphicsViews.values())e.viewChange()}isUpdating(){for(const e of this._graphicsViews.values())if(e.updating)return!0;return!1}_createGraphicsView(e,r){this._destroyGraphicsView(e);const a=this.view,n=()=>this.requestUpdate(),l=new i(t(r)?r.map((e=>{const{attributes:i,geometry:t,symbol:r,popupInfo:h}=e.toPortalJSON();return s.fromJSON({attributes:i,geometry:t,symbol:r,popupTemplate:h})})):[]),d=new c(a.featuresTilingScheme),m=new p({container:d,graphics:l,requestUpdateCallback:n,view:a});this._graphicsViews.set(e,m),this.container.addChildAt(d,g.indexOf(e)),this._updateHighlight(),this.handles.add([h((()=>m.updating),(()=>this.notifyChange(\"updating\")),o)],`updating-${e}`)}_destroyGraphicsView(e){if(!this._graphicsViews.has(e))return;const s=this._graphicsViews.get(e);this.container.removeChild(s.container),s.destroy(),this.handles.remove(`updating-${e}`),this._graphicsViews.delete(e)}_destroyGraphicsViews(){this.container.removeAllChildren();for(const[e,s]of this._graphicsViews.entries())this.handles.remove(e),s.destroy();this._graphicsViews.clear()}_addHighlight(e){for(const s of e)if(this._highlightIds.has(s)){const e=this._highlightIds.get(s);this._highlightIds.set(s,e+1)}else this._highlightIds.set(s,1);this._updateHighlight()}_removeHighlight(e){for(const s of e)if(this._highlightIds.has(s)){const e=this._highlightIds.get(s)-1;0===e?this._highlightIds.delete(s):this._highlightIds.set(s,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const s of this._graphicsViews.values())s.setHighlight(e)}};m=e([a(\"esri.views.2d.layers.RouteLayerView2D\")],m);const u=m;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["g","d","Object","freeze","remove","pause","resume","m","n","l","constructor","super","arguments","this","_graphicsViews","Map","_highlightIds","attach","e","handles","add","h","t","layer","r","toArray","s","_createGraphicsView","o","detach","_destroyGraphicsViews","highlight","uid","Array","isArray","length","map","i","filter","_addHighlight","_removeHighlight","suspended","size","Promise","resolve","from","values","reverse","hitTest","flat","sourceLayer","moveStart","moveEnd","update","processUpdate","viewChange","isUpdating","updating","_destroyGraphicsView","a","view","attributes","geometry","symbol","popupInfo","toPortalJSON","popupTemplate","c","featuresTilingScheme","p","container","graphics","requestUpdateCallback","requestUpdate","set","addChildAt","indexOf","_updateHighlight","notifyChange","has","get","removeChild","destroy","delete","removeAllChildren","entries","clear","keys","setHighlight","u","renderChildren","attributeView","bindTextures","context","children","some","hasData","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","bind","defines","draw","unbind"],"sourceRoot":""}